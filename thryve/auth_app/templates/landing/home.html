{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thryve ‚Ä¢ Marketplace</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              sky: '#83e6f5',   /* landing page sky blue */
              leaf: '#3ac363',   /* landing page light green */
              ink: '#0f172a'
            }
          },
          boxShadow: {
            soft: '0 10px 28px rgba(2, 8, 23, .06)'
          },
          fontFamily: {
            inter: ['Inter', 'ui-sans-serif', 'system-ui', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif']
          },
          borderRadius: {
            xl2: '1rem'
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body class="font-inter bg-[#f7fbfd] text-brand-ink">

  <!-- Header ‚Äî subtle blue‚Üígreen like landing -->
  <!-- Clean, professional navbar (no pill buttons) -->
  <!-- Professional Navbar with Icons -->
  <header class="bg-[#23d3ee] text-white shadow">
    <div class="max-w-7xl mx-auto h-16 px-6 flex items-center justify-between">

      <!-- Left: Logo -->
      <a href="{% url 'home' %}" class="flex items-center gap-2">
        <span
          class="inline-flex items-center justify-center w-8 h-8 rounded-md bg-white font-black text-[#23d3ee]">T</span>
        <span class="text-[22px] font-extrabold tracking-tight">Thryve</span>
      </a>

      <!-- Center: Navigation Links -->
      {% with active=request.resolver_match.url_name %}
      <nav class="flex items-center gap-8 text-[15px] font-medium">
        <!-- Marketplace -->
        <a href="{% url 'home' %}"
          class="relative flex items-center gap-2 pb-1 hover:text-white transition-all text-white/90">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 3h18l-1.68 9.39a2 2 0 01-1.98 1.61H6.66a2 2 0 01-1.98-1.61L3 3zM16 16a3 3 0 11-6 0"></path>
          </svg>
          <span class="leading-none">Marketplace</span>
          {% if active == 'home' %}
          <span class="absolute left-0 -bottom-1 h-[2px] w-full bg-white"></span>
          {% endif %}
        </a>

        <!-- Community -->
        <a href="#" class="relative flex items-center gap-2 pb-1 hover:text-white transition-all text-white/80">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5V4H2v16h5M17 8l-5 5-5-5" />
          </svg>
          <span class="leading-none">Community</span>
          {% if active == 'community' %}
          <span class="absolute left-0 -bottom-1 h-[2px] w-full bg-white"></span>
          {% endif %}
        </a>

        <!-- Bookings -->
        <a href="#" class="relative flex items-center gap-2 pb-1 hover:text-white transition-all text-white/80">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7H3v12a2 2 0 002 2z" />
          </svg>
          <span class="leading-none">Bookings</span>
          {% if active == 'bookings' %}
          <span class="absolute left-0 -bottom-1 h-[2px] w-full bg-white"></span>
          {% endif %}
        </a>

        <!-- Profile -->
        <a href="{% url 'business_profile' %}"
          class="relative flex items-center gap-2 pb-1 hover:text-white transition-all text-white/80">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M20 21a8 8 0 10-16 0m8-9a4 4 0 100-8 4 4 0 000 8z" />
          </svg>
          <span class="leading-none">Profile</span>
          {% if active == 'business_profile' %}
          <span class="absolute left-0 -bottom-1 h-[2px] w-full bg-white"></span>
          {% endif %}
        </a>
      </nav>
      {% endwith %}

      <!-- Right: Logout -->
      <button onclick="openLogoutModal()" type="button"
        class="flex items-center gap-2 font-medium text-white/90 hover:text-white transition-all text-[15px]">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H5a3 3 0 01-3-3V7a3 3 0 013-3h5a3 3 0 013 3v1" />
        </svg>
        <span class="leading-none">Logout</span>
      </button>

    </div>
  </header>





  <!-- Main -->
  <main class="max-w-[1200px] mx-auto px-5 py-8">
    <!-- Page header -->
    <div class="flex items-start justify-between gap-4 mb-6">
      <div>
        <h1 class="text-[38px] leading-[1.1] font-extrabold">Marketplace</h1>
        <p class="text-slate-600 mt-1">Buy, sell, or swap equipment and services with confidence.</p>
      </div>
      <a href="#"
        class="inline-flex items-center gap-2 rounded-lg bg-brand-leaf hover:bg-[#33b459] text-white font-semibold px-4 py-2.5 shadow-soft transition">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-width="2" d="M12 5v14M5 12h14" />
        </svg>
        Add Listing
      </a>
    </div>

    <!-- Search / Category -->
    <section class="bg-white/90 backdrop-blur rounded-xl shadow-soft border border-slate-100 p-5 mb-8">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Search -->
        <div>
          <label class="block text-slate-700 font-semibold mb-2">Search</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="7" stroke-width="2" />
                <path stroke-width="2" d="M21 21l-4.3-4.3" />
              </svg>
            </span>
            <input
              class="w-full rounded-lg border border-slate-200 pl-10 pr-3 py-2.5 font-medium focus:outline-none focus:ring-2 focus:ring-brand-sky placeholder:text-slate-400"
              placeholder="Search items, services, or locations‚Ä¶" />
          </div>
        </div>

        <!-- Category -->
        <div>
          <label class="block text-slate-700 font-semibold mb-2">Category</label>
          <div class="relative">
            <select
              class="w-full rounded-lg border border-slate-200 px-3 py-2.5 font-medium appearance-none focus:outline-none focus:ring-2 focus:ring-brand-sky">
              <option>All Categories</option>
              <option>IT Equipment</option>
              <option>Office</option>
              <option>Machinery</option>
              <option>Services</option>
            </select>
            <span class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-slate-400">‚ñæ</span>
          </div>
        </div>
      </div>

      <!-- Type -->
      <div class="mt-5">
        <div class="text-slate-700 font-semibold mb-3">Type</div>
        <div class="flex flex-wrap items-center gap-2">
          <button
            class="px-4 py-2 rounded-full bg-brand-sky text-slate-900 font-semibold hover:brightness-105 transition">All</button>
          <button class="px-4 py-2 rounded-full border border-brand-sky/60 text-slate-700 hover:bg-brand-sky/10">For
            Sale</button>
          <button
            class="px-4 py-2 rounded-full border border-brand-sky/60 text-slate-700 hover:bg-brand-sky/10">Swap</button>
          <button
            class="px-4 py-2 rounded-full border border-brand-sky/60 text-slate-700 hover:bg-brand-sky/10">Wanted</button>
        </div>
      </div>
    </section>

    <!-- Listings -->
    <section class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      <!-- Card -->
      <article class="bg-white rounded-xl shadow-soft border border-slate-100 p-5 flex flex-col">
        <div class="flex items-center justify-between mb-3">
          <span
            class="inline-flex items-center gap-2 text-[11px] tracking-wide font-bold text-white bg-slate-800 px-2.5 py-1 rounded-full">SALE</span>
          <span
            class="text-[11px] font-semibold text-emerald-700 bg-emerald-100 px-2.5 py-1 rounded-full">available</span>
        </div>
        <h3 class="text-lg font-bold">Industrial 3D Printer</h3>
        <div class="mt-0.5 text-slate-500 font-medium">TechFab Solutions</div>
        <p class="mt-3 text-slate-700">High-precision industrial 3D printer, barely used. Ideal for prototyping and
          small-scale production.</p>
        <div class="mt-4 text-[22px] font-extrabold text-brand-leaf">$8,500</div>
        <div class="mt-2 flex items-center justify-between text-sm text-slate-500 font-medium">
          <span>üìç New York, NY</span>
          <span>üìÖ 1/15/2024</span>
        </div>
        <div class="mt-5 grid grid-cols-2 gap-3">
          <a href="#" class="text-center rounded-lg border font-semibold py-2.5 hover:bg-slate-50">View Details</a>
          <a href="#"
            class="text-center rounded-lg bg-brand-leaf hover:bg-[#33b459] text-white font-semibold py-2.5">Book Now</a>
        </div>
      </article>

      <!-- Card -->
      <article class="bg-white rounded-xl shadow-soft border border-slate-100 p-5 flex flex-col">
        <div class="flex items-center justify-between mb-3">
          <span
            class="inline-flex items-center gap-2 text-[11px] tracking-wide font-bold text-white bg-emerald-600 px-2.5 py-1 rounded-full">SWAP</span>
          <span
            class="text-[11px] font-semibold text-emerald-700 bg-emerald-100 px-2.5 py-1 rounded-full">available</span>
        </div>
        <h3 class="text-lg font-bold">Office Furniture Set</h3>
        <div class="mt-0.5 text-slate-500 font-medium">Creative Spaces Inc</div>
        <p class="mt-3 text-slate-700">Complete set including 10 desks, chairs, and storage units. Modern design,
          excellent condition.</p>
        <p class="mt-2 text-slate-700">Looking for: <span class="font-semibold">IT equipment or professional
            services</span></p>
        <div class="mt-2 flex items-center justify-between text-sm text-slate-500 font-medium">
          <span>üìç Los Angeles, CA</span>
          <span>üìÖ 1/14/2024</span>
        </div>
        <div class="mt-5 grid grid-cols-2 gap-3">
          <a href="#" class="text-center rounded-lg border font-semibold py-2.5 hover:bg-slate-50">View Details</a>
          <a href="#"
            class="text-center rounded-lg bg-brand-leaf hover:bg-[#33b459] text-white font-semibold py-2.5">Book Now</a>
        </div>
      </article>

      <!-- Card -->
      <article class="bg-white rounded-xl shadow-soft border border-slate-100 p-5 flex flex-col">
        <div class="flex items-center justify-between mb-3">
          <span
            class="inline-flex items-center gap-2 text-[11px] tracking-wide font-bold text-white bg-slate-700 px-2.5 py-1 rounded-full">BUY</span>
          <span
            class="text-[11px] font-semibold text-emerald-700 bg-emerald-100 px-2.5 py-1 rounded-full">available</span>
        </div>
        <h3 class="text-lg font-bold">Looking for CNC Machine</h3>
        <div class="mt-0.5 text-slate-500 font-medium">MetalWorks Ltd</div>
        <p class="mt-3 text-slate-700">We need a CNC machine for metal fabrication. Budget up to $15,000 for the right
          fit.</p>
        <div class="mt-2 text-slate-700">Budget: <span class="font-semibold">$15,000</span></div>
        <div class="mt-2 flex items-center justify-between text-sm text-slate-500 font-medium">
          <span>üìç Chicago, IL</span>
          <span>üìÖ 1/13/2024</span>
        </div>
        <div class="mt-5 grid grid-cols-2 gap-3">
          <a href="#" class="text-center rounded-lg border font-semibold py-2.5 hover:bg-slate-50">View Details</a>
          <a href="#"
            class="text-center rounded-lg bg-brand-leaf hover:bg-[#33b459] text-white font-semibold py-2.5">Book Now</a>
        </div>
      </article>
    </section>
  </main>

  <!-- Logout Modal with Animation -->
  <div id="logoutModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog"
    aria-modal="true">
    <!-- Background overlay with fade animation -->
    <div id="modalOverlay" class="fixed inset-0 bg-black transition-opacity duration-300 ease-out opacity-0"
      onclick="closeLogoutModal()"></div>

    <!-- Modal container -->
    <div class="flex items-center justify-center min-h-screen p-4">
      <!-- Modal content with slide and scale animation -->
      <div id="modalContent"
        class="relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 p-8 transform transition-all duration-300 ease-out scale-95 translate-y-4 opacity-0">

        <!-- Icon -->
        <div class="flex justify-center mb-6">
          <div class="bg-gradient-to-r from-[#23d3ee] to-[#3ac363] rounded-full p-4">
            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
              </path>
            </svg>
          </div>
        </div>

        <!-- Title -->
        <h2 class="text-2xl font-bold text-gray-800 text-center mb-4">Confirm Logout</h2>

        <!-- Message -->
        <p class="text-gray-600 text-center mb-8">Are you sure you want to log out of your account?</p>

        <!-- Form -->
        <form method="POST" action="{% url 'logout' %}" class="space-y-4">
          {% csrf_token %}

          <!-- Buttons -->
          <div class="flex gap-4">
            <button type="button" onclick="closeLogoutModal()"
              class="flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition duration-200">
              Cancel
            </button>
            <button type="submit"
              class="flex-1 px-6 py-3 bg-gradient-to-r from-[#23d3ee] to-[#3ac363] text-white font-semibold rounded-lg hover:from-[#1cc4dd] hover:to-[#33b459] transition duration-200 shadow-lg">
              Logout
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    function openLogoutModal() {
      const modal = document.getElementById('logoutModal');
      const overlay = document.getElementById('modalOverlay');
      const content = document.getElementById('modalContent');

      // Calculate scrollbar width and prevent content shift
      const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;

      // Show modal
      modal.classList.remove('hidden');

      // Prevent background scrolling while maintaining layout
      document.body.style.overflow = 'hidden';
      document.body.style.paddingRight = scrollbarWidth + 'px';

      // Trigger animations
      setTimeout(() => {
        overlay.classList.remove('opacity-0');
        overlay.classList.add('opacity-50');

        content.classList.remove('scale-95', 'translate-y-4', 'opacity-0');
        content.classList.add('scale-100', 'translate-y-0', 'opacity-100');
      }, 10);
    }

    function closeLogoutModal() {
      const modal = document.getElementById('logoutModal');
      const overlay = document.getElementById('modalOverlay');
      const content = document.getElementById('modalContent');

      // Reverse animations
      overlay.classList.remove('opacity-50');
      overlay.classList.add('opacity-0');

      content.classList.remove('scale-100', 'translate-y-0', 'opacity-100');
      content.classList.add('scale-95', 'translate-y-4', 'opacity-0');

      // Hide modal after animation completes
      setTimeout(() => {
        modal.classList.add('hidden');

        // Restore scrolling and remove padding compensation
        document.body.style.overflow = 'auto';
        document.body.style.paddingRight = '';
      }, 300);
    }

    // Close modal on Escape key
    document.addEventListener('keydown', function (event) {
      if (event.key === 'Escape') {
        closeLogoutModal();
      }
    });

    // Close modal when clicking outside
    document.getElementById('logoutModal').addEventListener('click', function (event) {
      if (event.target === this) {
        closeLogoutModal();
      }
    });
  </script>

</body>

</html>